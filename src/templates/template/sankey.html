{% extends "_base.html" %}

{% block title %}Sankey{% endblock %}

{% block content %}

  <div id="sandkey"></div>
  <div id="simple"></div>

{% endblock %}

{% block footer %}

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/sankey.js"></script>
<script src="https://code.highcharts.com/9.1.0/modules/exporting.js"></script>

<script>
  Highcharts.chart("sandkey", {
    chart: {
      marginLeft: 100,
      marginBottom: 200,
      marginRight: 200,
    },
    title: {
      text: "Sandkey"
    },
    series: [{
      colors: ["#666"],
      keys: ["from", "to", "weight", "color"],
      data: [
        ["Imports", "Direct material inputs", 0.2, "green"],
        ["Imports", "Direct material inputs", 0.25, "red"],
        ["Imports", "Direct material inputs", 0.1, "blue"],
        ["Imports", "Direct material inputs", 1.1, "gold"],
        ["Natural resources extracted", "Direct material inputs", 1.61, "green"],
        ["Natural resources extracted", "Direct material inputs", 0.21, "red"],
        ["Natural resources extracted", "Direct material inputs", 2.93, "blue"],
        ["Natural resources extracted", "Direct material inputs", 0.57, "gold"],
        ["Direct material inputs", "Processed material", 1.8, "green"],
        ["Direct material inputs", "Processed material", 0.46, "red"],
        ["Direct material inputs", "Processed material", 3.03, "blue"],
        ["Direct material inputs", "Processed material", 1.67, "gold"],
        ["Processed material", "Total emissions", 1.16, "green"],
        ["Processed material", "Total emissions", 1.33, "gold"],
        ["Processed material", "Dissipative flows", 0.22, "green"],
        ["Processed material", "Dissipative flows", 0.04, "blue"],
        ["Processed material", "Material use", 0.39, "green"],
        ["Processed material", "Material use", 0.41, "red"],
        ["Processed material", "Material use", 3.58, "blue"],
        ["Processed material", "Material use", 0.09, "gold"],
        ["Processed material", "Exports", 0.2, "green"],
        ["Processed material", "Exports", 0.13, "red"],
        ["Processed material", "Exports", 0.27, "blue"],
        ["Processed material", "Exports", 0.06, "gold"],
        ["Total emissions", "Emissions to air", 1.22, "green"],
        ["Total emissions", "Emissions to air", 1.35, "gold"],
        ["Total emissions", "Emissions to water", 0.01, "green"],
        ["Incineration", "Total emissions", 0.07, "green"],
        ["Incineration", "Total emissions", 0.01, "blue"],
        ["Incineration", "Total emissions", 0.02, "gold"],
        ["Material use", "Waste treatment", 0.24, "green"],
        ["Material use", "Waste treatment", 0.09, "red"],
        ["Material use", "Waste treatment", 1.35, "blue"],
        ["Material use", "Waste treatment", 0.06, "gold"],
        ["Material use", "Material accumulation", 0.14, "green"],
        ["Material use", "Material accumulation", 0.32, "red"],
        ["Material use", "Material accumulation", 2.23, "blue"],
        ["Material use", "Material accumulation", 0.03, "gold"],
        ["Waste treatment", "Backfilling", 0.21, "blue"],
        ["Waste treatment", "Recycling", 0.14, "green"],
        ["Waste treatment", "Recycling", 0.08, "red"],
        ["Waste treatment", "Recycling", 0.46, "blue"],
        ["Waste treatment", "Recycling", 0.03, "gold"],
        ["Waste treatment", "Incineration", 0.07, "green"],
        ["Waste treatment", "Incineration", 0.01, "blue"],
        ["Waste treatment", "Incineration", 0.02, "gold"],
        ["Waste treatment", "Waste landfilled", 0.03, "green"],
        ["Waste treatment", "Waste landfilled", 0.67, "blue"],
        ["Waste treatment", "Waste landfilled", 0.01, "gold"],
        ["Backfilling", "Processed material", 0.21, "blue"],
        ["Recycling", "Processed material", 0.14, "green"],
        ["Recycling", "Processed material", 0.08, "red"],
        ["Recycling", "Processed material", 0.46, "blue"],
        ["Recycling", "Processed material", 0.03, "gold"],
      ],
      clip: false,
      type: "sankey",
      cursor: "pointer",
      events: {
        click: function(event) {
          alert(event.point.weight + " from " + event.point.from + " to " + event.point.to + "(" + event.point.code + ")");
        }
      }
    }]
  });


Highcharts.chart('simple', {

    title: {
        text: 'Highcharts Sankey Diagram'
    },
    accessibility: {
        point: {
            valueDescriptionFormat: '{index}. {point.from} to {point.to}, {point.weight}.'
        }
    },
    series: [{
        keys: ['from', 'to', 'weight'],
        data: [
            ['Brazil', 'Portugal', 5],
            ['Brazil', 'France', 1],
            ['Brazil', 'Spain', 1],
            ['Brazil', 'England', 1],
            ['Canada', 'Portugal', 1],
            ['Canada', 'France', 5],
            ['Canada', 'England', 1],
            ['Mexico', 'Portugal', 1],
            ['Mexico', 'France', 1],
            ['Mexico', 'Spain', 5],
            ['Mexico', 'England', 1],
            ['USA', 'Portugal', 1],
            ['USA', 'France', 1],
            ['USA', 'Spain', 1],
            ['USA', 'England', 5],
            ['Portugal', 'Angola', 2],
            ['Portugal', 'Senegal', 1],
            ['Portugal', 'Morocco', 1],
            ['Portugal', 'South Africa', 3],
            ['France', 'Angola', 1],
            ['France', 'Senegal', 3],
            ['France', 'Mali', 3],
            ['France', 'Morocco', 3],
            ['France', 'South Africa', 1],
            ['Spain', 'Senegal', 1],
            ['Spain', 'Morocco', 3],
            ['Spain', 'South Africa', 1],
            ['England', 'Angola', 1],
            ['England', 'Senegal', 1],
            ['England', 'Morocco', 2],
            ['England', 'South Africa', 7],
            ['South Africa', 'China', 5],
            ['South Africa', 'India', 1],
            ['South Africa', 'Japan', 3],
            ['Angola', 'China', 5],
            ['Angola', 'India', 1],
            ['Angola', 'Japan', 3],
            ['Senegal', 'China', 5],
            ['Senegal', 'India', 1],
            ['Senegal', 'Japan', 3],
            ['Mali', 'China', 5],
            ['Mali', 'India', 1],
            ['Mali', 'Japan', 3],
            ['Morocco', 'China', 5],
            ['Morocco', 'India', 1],
            ['Morocco', 'Japan', 3]
        ],
        type: 'sankey',
        name: 'Sankey demo series'
    }]

});
              
</script>
{% endblock %}
