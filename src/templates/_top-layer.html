{% load static %}
<div class="top-layer">
  {% if subsite %}
    <div class="return-bar">
      <div class="container">
        <a href="{{ SITE_URL }}"><i class="fad fa-arrow-circle-left"></i> Return to {{ SITE_NAME }}</a>
      </div>
    </div>
  {% endif %}

  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      {% if subsite %}
        <a class="navbar-brand" href="{{ subsite.slug }}">
          <img alt="{{ subsite.title }}" src="{% if subsite.logo %}{{ subsite.logo }}{% else %}{% static 'img/logo.svg' %}{% endif %}">
        </a>
      {% else %}
        <a class="navbar-brand" href="/">
          <img alt="Metabolism of Cities" src="{% static 'img/logo.svg' %}">
        </a>
      {% endif %}
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">
          
          {% if subsite.id == 51 %}
            {% include "_menu-multiplicity.html" %}
          {% elif subsite.id == 55 %}
            {% include "_menu-stafcp.html" %}
          {% elif subsite.id == 53 %}
            {% include "_menu-platformu.html" %}
          {% elif subsite and menu %}
            {% for each in menu %}
              <li class="nav-item"><a class="nav-link" href="{{ each.get_absolute_url }}">{{ each }}</a></li>
            {% endfor %}

          {% else %}

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="about-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Urban metabolism
              </a>
              <div class="dropdown-menu" aria-labelledby="about-dropdown">
                {% for each in UM %}
                  <a class="dropdown-item" href="{{ each.get_absolute_url }}">{{ each }}</a>
                {% endfor %}
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="community-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Community
              </a>
              <div class="dropdown-menu" aria-labelledby="community-dropdown">
                {% for each in COMMUNITY %}
                  <a class="dropdown-item" href="{{ each.get_absolute_url }}">{{ each }}</a>
                {% endfor %}
              </div>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="projects-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Our Projects
              </a>
              <div class="dropdown-menu" aria-labelledby="projects-dropdown">
                {% for each in PROJECTS %}
                  <a class="dropdown-item" href="{{ each.get_absolute_url }}">{{ each }}</a>
                {% endfor %}
              </div>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="about-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                About
              </a>
              <div class="dropdown-menu" aria-labelledby="about-dropdown">
                {% for each in ABOUT %}
                  <a class="dropdown-item" href="{{ each.get_absolute_url }}">{{ each }}</a>
                {% endfor %}
              </div>
            </li>

          {% endif %}

        </ul>
      </div>
    </div>
  </nav>

  {% if header.type == "full" %}
    <div class="jumbotron jumbotron-fluid text-light">
      <div class="container">
        {% if header.title %}
          <h1 class="display-4">{{ header.title }}</h1>
        {% endif %}
        {% if header.subtitle %}
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              {{ header.subtitle|safe }}
            </ol>
          </nav>
        {% endif %}
      </div>
    </div>
  {% elif header.type == "image" %}
    <div style="background-image: url('{{ header.image }}');height:800px;background-size:cover"></div>
  {% elif subsite.id == 51 and city %}
    <div id="img-city" style="background-image: url('{{ header.image }}');">
      <div class="black-cover"></div>

      <div class="container">
        <div class="city-name">{{ city }}, {{ country }}</div>
      </div>
    </div>

    <div class="down-city-name">
      <div class="container">
        <a href="{{ SITE_URL }}"><i class="fad fa-arrow-circle-left"></i></a>
        <span>{{ city }}, {{ country }}</span>
      </div>
    </div>
  {% endif %}

</div>

{% if subsite.id == 51 and city %}
  <nav class="navbar navbar-expand-lg navbar-city">
    <div class="container">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="#">Overview</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">City Profile</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Resources
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#">Agriculture</a>
              <a class="dropdown-item" href="#">Water</a>
              <a class="dropdown-item" href="#">Waste</a>
              <a class="dropdown-item" href="#">Energy</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Sectors
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#">Agriculture</a>
              <a class="dropdown-item" href="#">Water</a>
              <a class="dropdown-item" href="#">Waste</a>
              <a class="dropdown-item" href="#">Energy</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Upload</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
{% endif%}

{% if subsite.id == 51 and city %}
  {% block javascript %}
  <script>
     // When the user scrolls down 50px from the top of the document, resize the header's font size
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
      if ($(window).scrollTop() > $(".navbar-city").position().top) {
        $("body").addClass("scrolled-down");
      } else {
        $("body").removeClass("scrolled-down");
      }
    } 
  </script>
  {% endblock %}
{% endif %}
