{% extends "_base.html" %}
{% load static %}

{% block css %}
  <style>
    .table td {
      vertical-align: middle;
      padding: 1rem .75rem;
    }

    tr.disabled .indicator-name,
    tr.disabled .number {
      opacity: .5;
    }

    td.indicator-switch {
      width: 50px;
    }

    td.number {
      width: 48px;
      padding-right: 0;
    }

    td.checkbox {
      width: 200px;
      border-left: 1px solid #dee2e6
    }

    .indicator-number {
      background-color: #144d58;
      color: #fff;
      padding: 0 .5rem;
      border-radius: .25rem;
      display: inline-block;
      font-weight: bold;
    }

    th.sticky-top {
      top: 0;
    }
  </style>
{% endblock %}

{% block content %}

  <h1>Evaluation plan</h1>

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb bg-transparent p-0">
      <li class="breadcrumb-item"><a href="{% url 'cityloops:dashboard_mockup' 'bodo' %}">{{ info }}</a></li>
      <li class="breadcrumb-item"><a href="{% url 'cityloops:city_evaluation_plan' 'bodo' %}">Evaluation plan</a></li>
      <li class="breadcrumb-item active" aria-current="page">Select indicators</li>
    </ol>
  </nav>

  <form>
    <div class="card card-table mb-4">
      <table class="table">
        <thead>
          <tr>
            <th class="sticky-top" colspan="3">Indicator</th>
            <th class="sticky-top border-left">Demonstration action</th>
            <th class="sticky-top border-left">City</th>
            <th class="sticky-top border-left text-muted">Sector <small>(disabled)</small></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td colspan="6" class="ve bg-light font-weight-bold">
              1. Local stakeholder actions
            </td>
          </tr>

          <tr>
            <td class="indicator-switch">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-indicator" checked>
                <label class="custom-control-label" for="1-indicator"></label>
              </div>
            </td>
            <td class="number"><span class="indicator-number">01</span></td>
            <td class="indicator-name">{% lorem 4 w random %}</td>
            <td class="checkbox da">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-da" checked>
                <label class="custom-control-label" for="1-da"></label>
              </div>
            </td>
            <td class="checkbox city">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-city">
                <label class="custom-control-label" for="1-city"></label>
              </div>
            </td>
            <td class="checkbox sector">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-sector" disabled>
                <label class="custom-control-label" for="1-sector"></label>
              </div>
            </td>
          </tr>

          <tr>
            <td colspan="6" class="ve bg-light font-weight-bold">
              2. Circular business models and behavioural patterns
            </td>
          </tr>

          <tr>
            <td class="indicator-switch">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="6-indicator" checked>
                <label class="custom-control-label" for="6-indicator"></label>
              </div>
            </td>
            <td class="number"><span class="indicator-number">06</span></td>
            <td class="indicator-name">{% lorem 4 w random %}</td>
            <td class="checkbox da">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="6-da">
                <label class="custom-control-label" for="6-da"></label>
              </div>
            </td>
            <td class="checkbox city">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="6-city" checked>
                <label class="custom-control-label" for="6-city"></label>
              </div>
            </td>
            <td class="checkbox sector">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="6-sector" disabled>
                <label class="custom-control-label" for="6-sector"></label>
              </div>
            </td>
          </tr>

          <tr>
            <td colspan="6" class="ve bg-light font-weight-bold">
              3. Closing material loops and reducing harmful resource use
            </td>
          </tr>

          <tr>
            <td class="indicator-switch">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="9-indicator">
                <label class="custom-control-label" for="9-indicator"></label>
              </div>
            </td>
            <td class="number"><span class="indicator-number">09</span></td>
            <td class="indicator-name">{% lorem 4 w random %}</td>
            <td class="checkbox da">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="9-da" disabled>
                <label class="custom-control-label" for="9-da"></label>
              </div>
            </td>
            <td class="checkbox city">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="9-city" disabled>
                <label class="custom-control-label" for="9-city"></label>
              </div>
            </td>
            <td class="checkbox sector">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="9-sector" disabled>
                <label class="custom-control-label" for="9-sector"></label>
              </div>
            </td>
          </tr>

          <tr>
            <td colspan="6" class="ve bg-light font-weight-bold">
              4. Improving human well-being and reducing environmental impacts
            </td>
          </tr>

          <tr>
            <td class="indicator-switch">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="15-indicator" checked>
                <label class="custom-control-label" for="15-indicator"></label>
              </div>
            </td>
            <td class="number"><span class="indicator-number">15</span></td>
            <td class="indicator-name">Circular Material Use Rate</td>
            <td class="checkbox da">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="15-da" checked>
                <label class="custom-control-label" for="15-da"></label>
              </div>
            </td>
            <td class="checkbox city">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="15-city">
                <label class="custom-control-label" for="15-city"></label>
              </div>
            </td>
            <td class="checkbox sector">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="15-sector" disabled>
                <label class="custom-control-label" for="15-sector"></label>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <button class="btn btn-primary">
      <i class="fa fa-save"></i> Save
    </button>

  </form>
{% endblock %}

{% block footer %}
  <script>
    $(".indicator-switch input").change(function() {
      let indicatorSwitch = $(this);
      let row = indicatorSwitch.closest("tr");

      if (indicatorSwitch.prop("checked")) {
        row.removeClass("disabled")
        row.find(".checkbox:not(.sector) input").removeAttr("disabled");
      } else {
        row.addClass("disabled")
        row.find(".checkbox:not(.sector) input").attr("disabled", "disabled").prop("checked", false);
      }
    })
  </script>
{% endblock %}