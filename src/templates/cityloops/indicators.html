{% extends "_base.html" %}
{% load static %}

{% block css %}
<style>
  #indicator-menu nav {
    width: 100%;
  }

  #indicator-menu .nav-link {
    font-size: 14px;
    padding: .25rem .5rem;
    width: 100%;
  }

  #indicator-menu .nav-link.active {
    background-color: #b6ced2;
  }

  #indicator-menu .nav-link.group {
    font-weight: bold;
  }

  #indicator-menu .nav-link.group:not(:first-of-type) {
    border-top: 1px solid #dee2e6;
  }

  #indicator-menu .nav-link.group.active {
    background-color: #9cb7bb;
  }

  .indicator-group {
    margin-bottom: 3rem;
  }

  .indicator {
    margin-top: 3rem;
    border: 1px solid #dee2e6;
    border-radius: .25rem;
    padding: 1.5rem 1rem 0 1rem;
    position: relative;
  }

  .indicator .title {
    position: absolute;
    top: -16px;
    background: #fcfcfc;
    padding: 0 1rem;
    font-weight: bold;
  }

  .indicator .number {
    background-color: #144d58;
    color: #fff;
    padding: 0 .5rem;
    border-radius: .25rem;
    margin-right: .5rem;
    font-size: 1rem;
    font-weight: bold;
  }

  .indicator hr,
  .list-group {
    margin-left: -1rem;
    width: calc(100% + 2rem);
  }

  .indicator .list-group-item {
    border-bottom: none;
    border-radius: 0;
    text-align: center;
  }

  .indicator .list-group .list-group-item:first-of-type {
    border-left: none;
    border-top-left-radius: 0;
  }

  .indicator .list-group .list-group-item:last-of-type {
    border-right: none;
    border-top-right-radius: 0;
  }

  .indicator .unit {
    font-weight: 300;
    font-size: 2rem;
    height: 32px;
    line-height: 1;
    display: inline-block;
  }

  .indicator img.sdg {
    height: 58.5px;
    border-radius: 2px;
  }


  .copy-link {
    opacity: 0;
    position: absolute;
    top: 0px;
    right: 0px;
    border-bottom: 1px solid #dee2e6;
    border-left: 1px solid #dee2e6;
    padding: 1px;
    border-bottom-left-radius: .25rem;
    font-size: .825rem;
    min-width: 23px;
    text-align: center;
    background: #efefef;
    cursor: pointer;
    transition: all .3s;
  }

  .copy-link:hover {
    background-color: #dee2e6;
  }

  .indicator:hover .copy-link {
    opacity: 1;
  }
</style>
{% endblock %}

{% block content %}

  <h1>Indicators</h1>

  {% lorem 1 p %}

  <div class="row">
    <div class="col-lg-9 pt-3" data-spy="scroll" id="indicators" data-target="#indicator-menu">
      <div class="indicator-group">
        <h4 id="group-1">Local stakeholder actions</h4>

        {% for each in indicators %}
          <div class="indicator">
            <div class="title" id="indicator-{{ each.number }}">
              <span class="number">{{ each.number }}</span>
              {{ each.name }}
            </div>

            <div class="description">
              {{ each.description|safe }}
            </div>

            <hr>

            <dl>
              <dt>Methodology</dt>
              <dd>
                {{ each.methodology }}
              </dd>
            </dl>

            <hr>

            <dl>
              <dt>Vision element</dt>
              <dd>{{ each.vision_element }}</dd>

              <dt>Category</dt>
              <dd>
                {{ each.category }}
              </dd>
            </dl>


            <div class="list-group list-group-horizontal">
              <a class="list-group-item list-group-item-action" href="https://ec.europa.eu/eurostat/cache/metadata/EN/env_ac_cur_esms.htm">
                <i class="fal fa-fw fa-2x fa-link"></i> <br>
                <span>Source</span>
              </a>
              <a class="list-group-item list-group-item-action">
                <div>{{ each.unit }}</div><br>
                <span>Unit</span>
              </a>
              <a class="list-group-item list-group-item-action" href="https://www.un.org/sustainabledevelopment/energy/">
                <img class="sdg" src="{% static 'img/sdg/sdg-12.png' %}">
              </a>
            </div>

            <div class="strategic-objective"></div>


            <a class="copy-link text-dark" href="#indicator-41">
              <i class="far fa-fw fa-link"></i> <span class="link-copied pr-1" hidden>Link copied</span>
            </a>
          </div>
        {% endfor %}

      </div>

      <div class="indicator-group">
        <h4 id="group-2">Circular business models and behavioural patterns</h4>
      </div>

      <div class="indicator-group">
        <h4 id="group-3">Closing material loops and reducing harmful resource use</h4>

      </div>

      <div class="indicator-group">
        <h4 id="group-4">Improving human well-being and reducing environmental impacts</h4>
      </div>

    </div>
    <div class="col-lg-3 pt-3">
      <h4 class="mb-5">&nbsp;</h4>
      <nav class="navbar navbar-light border rounded sticky-top p-0" id="indicator-menu">
        <nav class="nav flex-column">
          <a class="nav-link group" href="#group-1">1. Local stakeholder actions</a>
          <nav class="nav flex-column">
            {% for each in indicators %}
              <a class="nav-link pl-3" href="#indicator-{{ each.number }}">{{ each.number }}. {{ each.name }}</a>
            {% endfor %}
          </nav>
        </nav>
      </nav>
    </div>
  </div>

{% endblock %}

{% block footer %}
  <script>
    $("body").scrollspy({ target: "#indicator-menu"})

    // copy url
    function copyToClipboard(element) {
      let temp = $("<input>");
      $("body").append(temp);
      temp.val(element).select();
      document.execCommand("copy");
      temp.remove();
    }

    // share button popup
    $(".copy-link").click(function() {
      $(this).find(".link-copied").removeAttr("hidden")
      setTimeout(function(){
        copyToClipboard(window.location.href);
      }, 300);
      setTimeout(function(){
        $(".link-copied").attr("hidden", "hidden")
      }, 5000);
    });
  </script>
{% endblock %}