{% extends "_base.html" %}
{% load static %}

{% block css %}
  <style>
    .table td {
      vertical-align: middle;
      padding: 1rem .75rem;
    }

    td.number {
      width: 48px;
      padding-right: 0;
    }

    td.checkbox {
      width: 48px;
      border-left: 1px solid #dee2e6
    }

    td.status {
      width: 150px;
      text-align: right;
    }

    .status .badge {
      padding: 0 0 0 .4rem;
    }

    .status .edit {
      height: 100%;
      padding: 6px .4em;
      margin-left: .4rem;
      display: inline-block;
      background-color: rgba(0,0,0,.5);
      border-top-right-radius: .25rem;
      border-bottom-right-radius: .25rem;
    }

    .indicator-number {
      background-color: #144d58;
      color: #fff;
      padding: 0 .5rem;
      border-radius: .25rem;
      display: inline-block;
      font-weight: bold;
    }

    .custom-switch .custom-control-input:disabled:checked ~ .custom-control-label::before {
      background-color: #144d58;
    }
  </style>
{% endblock %}

{% block content %}

  <h1>Evaluation plan</h1>

  <nav aria-label="breadcrumb">
    <ol class="breadcrumb bg-transparent p-0">
      <li class="breadcrumb-item"><a href="{% url 'cityloops:dashboard_mockup' 'bodo' %}">{{ info }}</a></li>
      <li class="breadcrumb-item active" aria-current="page">Evaluation plan</li>
    </ol>
  </nav>

  <form class="mt-4">
    <div class="card card-table mb-4">
      <table class="table">
        <thead>
          <tr>
            <th colspan="2">Indicator</th>
            <th colspan="2" class="border-left">Demonstration action</th>
            <th colspan="2" class="border-left">City</th>
            <th colspan="2" class="border-left text-muted">
              Sector <small>(disabled)</small>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="number"><span class="indicator-number">01</span></td>
            <td>{% lorem 4 w random %}</td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-da" checked disabled>
                <label class="custom-control-label" for="1-da"></label>
              </div>
            </td>
            <td class="status has-button">
              <i class="fa fa-check text-success mr-2"></i>
              <a class="btn btn-sm btn-primary-light" href="{% url 'cityloops:city_evaluation_plan_indicator' 'bodo' 1 %}"><i class="fa fa-info-circle"></i> View</a>
            </td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-city" disabled>
                <label class="custom-control-label" for="1-city"></label>
              </div>
            </td>
            <td class="status">
            </td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-sector" disabled>
                <label class="custom-control-label" for="1-sector"></label>
              </div>
            </td>
            <td class="status"></td>
          </tr>
          <tr>
            <td class="number"><span class="indicator-number">06</span></td>
            <td>{% lorem 4 w random %}</td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-da" disabled>
                <label class="custom-control-label" for="1-da"></label>
              </div>
            </td>
            <td class="status">
            </td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-city" checked disabled>
                <label class="custom-control-label" for="1-city"></label>
              </div>
            </td>
            <td class="status has-button">
              <a class="btn btn-sm btn-primary-light" href="{% url 'cityloops:city_evaluation_plan_indicator' 'bodo' 1 %}"><i class="fa fa-info-circle"></i> View</a>
            </td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-sector" disabled>
                <label class="custom-control-label" for="1-sector"></label>
              </div>
            </td>
            <td class="status"></td>
          </tr>
          <tr>
            <td class="number"><span class="indicator-number">15</span></td>
            <td>Circular Material Use Rate </td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-da" checked disabled>
                <label class="custom-control-label" for="1-da"></label>
              </div>
            </td>
            <td class="status has-button">
              <i class="fa fa-check text-success mr-2"></i>
              <a class="btn btn-sm btn-primary-light" href="{% url 'cityloops:city_evaluation_plan_indicator' 'bodo' 1 %}"><i class="fa fa-info-circle"></i> View</a>
            </td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-city" disabled>
                <label class="custom-control-label" for="1-city"></label>
              </div>
            </td>
            <td class="status">
            </td>
            <td class="checkbox">
              <div class="custom-control custom-switch">
                <input type="checkbox" class="custom-control-input" id="1-sector" disabled>
                <label class="custom-control-label" for="1-sector"></label>
              </div>
            </td>
            <td class="status"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </form>

  <div class="mt-4">
    <div class="btn btn-primary download-word">
      <i class="fa fa-file-word"></i> Export
    </div>

    <a class="btn btn-primary" href="{% url 'cityloops:city_evaluation_plan_form' 'bodo' %}">
      <i class="fa fa-tasks"></i> Select indicators
    </a>
  </div>
{% endblock %}

{% block footer %}
  <!-- library for exporting to docx -->
  <script src="https://unpkg.com/docx@5.0.2/build/index.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>

  <script>
    function downloadWord() {
      var word = new docx.Document();

      word.addSection({
        properties: {},
        children: [
          new docx.Paragraph({
            children: [
              new docx.TextRun("Metabolism of Cities!"),
              new docx.TextRun({
                text: "Etc etc etc",
              }),
            ],
          }),
        ],
      });

      docx.Packer.toBlob(word).then(blob => {
        saveAs(blob, "report.docx");
      });
    }

    $(".download-word").click(function() {
      downloadWord()
    });
  </script>
{% endblock %}